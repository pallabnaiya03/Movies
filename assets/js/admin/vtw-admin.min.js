!function(o,t){"use strict";var i,v=o(document);i=function(r){function n(a){a.on("change",".widget_type",function(){var t=jQuery(this).val();jQuery(".spinner",a).addClass("is-active"),jQuery.ajax({data:{widget:t,action:"vodi_tabbed_get_settings_form",_nonce:Vodi_Tabbed_Widget_Settings.nonce},url:ajaxurl,type:"post",dataType:"html",success:function(t){var e=o(t),i=jQuery(".tabbed-widget-settings",a);i.html(e),jQuery(".spinner",a).removeClass("is-active"),v.trigger("widget-added",[i]),jQuery(window).trigger("resize")}})})}function d(i,a){a.on("change keyup","input, select, textarea",function(){var t=jQuery("input, select, textarea",a).serialize();if(jQuery("input.tab-value",i).val(t),0<jQuery('input[id*="-title"]',a).length){var e=jQuery('input[id*="-title"]',a).val()||Vodi_Tabbed_Widget_Settings.untitled;jQuery(".vodi-tw-label",i).text(e)}})}jQuery(".vodi-tw-tab-content",r).each(function(){n(jQuery(this))}),jQuery(".vodi-tw-nav li.vodi-tw-title",r).each(function(t){var e="tab-"+t+(new Date).getTime();jQuery(this).attr("data-for",e);var i=jQuery(".vodi-tw-tab-content",r).eq(t);i.attr("id",e),i.attr("data-index",t);var a=i.find(".widget.tabbed-widget-settings");0<a.length&&v.trigger("widget-added",[a])}),r.on("click",".vodi-tw-nav li.vodi-tw-title",function(t){if(t.preventDefault(),!jQuery(".dashicons",jQuery(this)).is(t.target)&&!jQuery(".vodi-tw-remove",jQuery(this)).is(t.target)&&!jQuery(this).hasClass("ui-state-disabled")){var e=jQuery(this).attr("data-for");jQuery(".vodi-tw-tab-content",r).removeClass("tab-active"),jQuery("#"+e+".vodi-tw-tab-content",r).addClass("tab-active"),jQuery(".vodi-tw-nav li",r).removeClass("nav-active"),jQuery(this).addClass("nav-active"),jQuery(".vodi-tw-nav li.vodi-tw-title",r).each(function(t){jQuery(this).hasClass("nav-active")&&jQuery("input.current_active",r).val(t)})}});var t=jQuery("input.current_active",r).val();t=parseInt(t),isNaN(t)&&(t=0),jQuery(".vodi-tw-nav li.vodi-tw-title",r).eq(t).length?jQuery(".vodi-tw-nav li.vodi-tw-title",r).eq(t).trigger("click"):jQuery(".vodi-tw-nav li.vodi-tw-title",r).eq(0).trigger("click"),jQuery(".vodi-tw-nav li.vodi-tw-title",r).each(function(t){var e="tab-"+t+(new Date).getTime(),i=jQuery(this);i.attr("data-for",e);var a=jQuery(".vodi-tw-tab-content",r).eq(t);a.attr("id",e),a.attr("data-index",t),d(i,a);var n=jQuery("input, select, textarea",a).serialize();jQuery("input.tab-value",i).val(n)}),jQuery(".vodi-tw-nav",r).sortable({containment:"parent",items:"li:not(.ui-state-disabled)",change:function(t,e){var i=(new Date).getTime();o(".base_tab_id",r).val(i).trigger("change")}}),r.on("click",".vodi-tw-nav li .vodi-tw-remove",function(t){t.preventDefault();var e=jQuery(this).parent();if(!e.hasClass("ui-state-disabled")){var i=e.attr("data-for");jQuery("#"+i+".vodi-tw-tab-content",r).remove(),e.remove();var a=jQuery(".vodi-tw-nav li.vodi-tw-title",r).length;!function(t){0<jQuery(".vodi-tw-nav li.vodi-tw-title",r).eq(t).length?jQuery(".vodi-tw-nav li.vodi-tw-title",r).eq(t).trigger("click"):jQuery(".vodi-tw-nav li.vodi-tw-title",r).eq(0).trigger("click")}(0),jQuery(window).trigger("resize"),a<=0&&jQuery(".no-tabs",r).show();var n=(new Date).getTime();o(".base_tab_id",r).val(n).trigger("change")}}),r.on("click",".add-new-tab",function(t){t.preventDefault();var e="tab-"+Math.floor(100*Math.random()+1)+(new Date).getTime(),i=jQuery(jQuery(".title-tpl",r).html());i.attr("data-for",e),jQuery(".vodi-tw-nav",r).append(i);var a=jQuery(jQuery(".settings-tpl",r).html());a.attr("id",e),jQuery(".vodi-tw-tab-contents",r).append(a),jQuery(window).trigger("resize"),n(a),d(i,a),i.trigger("click"),jQuery(".no-tabs",r).hide()})},t?t.bind("ready",function(t,e){o(".widgets-holder-wrap:not(#available-widgets)").find("div.widget").one("click.toggle-widget-expanded",function(){var t=o(this);new i(o(".vodi-tw-tabs",t))}),jQuery(document).on("widget-added widget-updated",function(t,e){new i(o(".vodi-tw-tabs",e))})}):(v.ready(function(){o(".widgets-holder-wrap:not(#available-widgets)").find("div.widget").one("click.toggle-widget-expanded",function(){var t=o(this);new i(o(".vodi-tw-tabs",t))}),jQuery(document).on("widget-added widget-updated",function(t,e){new i(o(".vodi-tw-tabs",e))})}),v.on("panelsopen",function(t){var e=o(t.target);new i(o(".vodi-tw-tabs",e))}))}(jQuery,wp.customize||null);